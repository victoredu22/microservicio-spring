jobs:
  - job:
    pool:
      vmImage: ubuntu-latest
      displayName: Build

    steps:
      - task: Gradle@3
        inputs:
          gradleWrapperFile: "gradlew"
          tasks: "build"
          publishJUnitResults: true
          testResultsFiles: "**/TEST-*.xml"
          javaHomeOption: "JDKVersion"
          sonarQubeRunAnalysis: false
          spotBugsAnalysis: false
        displayName: Build

      - task: SonarCloudPrepare@1
        inputs:
          SonarCloud: 'sonarcloud'
          organization: 'victoredu22'
          scannerMode: 'Other'
          projectKey: 'victoredu22_microservicio-spring'
          projectName: :'microservicio-spring'
        displayName: "SonarCloud"
      - task: Gradle@3
        inputs:
          gradleWrapperFile: "gradlew"
          tasks: "sonarqube"
          publishJUnitResults: false
          javaHomeOption: "JDKVersion"
          sonarQubeRunAnalysis: true
          sqGradlePluginVersionChoice: "specify"
          sonarQubeGradlePluginVersion: "3.5.0.2730"
          spotBugsAnalysis: false